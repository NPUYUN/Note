# 整数规划（IP/MIP）
## 定义
在一组线性约束条件下，部分或全部决策变量被要求取整数（或0/1）的优化问题。若目标函数与约束均为线性，且含有整数变量，称为整数线性规划（IP）；同时包含整数与连续变量时称为混合整数线性规划（MIP）。

## 模型三要素
- 决策变量：连续变量、整数变量、0/1变量。
- 目标函数：最大化或最小化的线性函数。
- 约束条件：线性等式/不等式与符号（整型/非负）约束。

## 数学形式示例
最大化版本：
$$
\begin{aligned}
\max\; & 3x_1 + 2x_2 \\
\text{s.t.}\; & x_1 + x_2 \le 4 \\
& 3x_1 + 2x_2 \le 12 \\
& x_1,\ x_2 \in \mathbb{Z}_{\ge 0}
\end{aligned}
$$

二元0-1示例：
$$
\begin{aligned}
\max\; & 5y_1 + 4y_2 + 3y_3 \\
\text{s.t.}\; & 2y_1 + y_2 + y_3 \le 3 \\
& y_i \in \{0,1\},\ i=1,2,3
\end{aligned}
$$

## 建模要点
- 使用0/1变量表达选择、启用、逻辑关系；谨慎使用 big-M，尽量选取紧致的M。
- 尽可能加强约束（有效不等式、界限）以加速分支定界求解。
- 将纯整数难题分解：拉格朗日松弛、列生成、Benders分解等（进阶）。

## 求解示例
### PuLP（CBC）
```python
import pulp as lp

model = lp.LpProblem("IP", lp.LpMaximize)

x1 = lp.LpVariable("x1", lowBound=0, cat=lp.LpInteger)
x2 = lp.LpVariable("x2", lowBound=0, cat=lp.LpInteger)

model += 3*x1 + 2*x2

model += x1 + x2 <= 4
model += 3*x1 + 2*x2 <= 12

status = model.solve()

print(lp.LpStatus[status])
print(lp.value(x1))
print(lp.value(x2))
print(lp.value(model.objective))
```

### OR-Tools（CP-SAT）
```python
from ortools.sat.python import cp_model

model = cp_model.CpModel()

x1 = model.NewIntVar(0, 12, "x1")
x2 = model.NewIntVar(0, 12, "x2")

model.Add(x1 + x2 <= 4)
model.Add(3*x1 + 2*x2 <= 12)
model.Maximize(3*x1 + 2*x2)

solver = cp_model.CpSolver()
status = solver.Solve(model)

print(solver.StatusName(status))
print(solver.Value(x1))
print(solver.Value(x2))
print(solver.ObjectiveValue())
```

### CVXPY（GLPK_MI）
```python
import cvxpy as cp

x = cp.Variable(2, integer=True)

obj = cp.Maximize(3*x[0] + 2*x[1])
cons = [x[0] + x[1] <= 4,
        3*x[0] + 2*x[1] <= 12,
        x >= 0]

prob = cp.Problem(obj, cons)
prob.solve(solver=cp.GLPK_MI)

print(x.value)
print(obj.value)
```
