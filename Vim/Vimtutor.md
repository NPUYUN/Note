# Vim官方中文教程

## 打开方式

终端输入
``` bash
vimtutor zh
```
即可进入

## 学习方法

***多练***

---
---

# 第一讲

---

### 移动光标

- `h`或者左箭头：向左移动
- `l`或者右箭头：向右移动
- `j`或者下箭头：向下移动
- `k`或者上箭头：向上移动

---

### Vim的进入与退出

- 启动：
``` bash
    vim
```

- 退出：按下<kbd>ESC</kbd>后输入：
``` bash
    :q! <回车>
```

> 按<kbd>ESC</kbd>是为了确保处于正常模式
> :q! <回车> 会丢弃进入编辑器以来的改动

---

### 文本编辑之删除

在正常（Normal）模式下，按下<kbd>x</kbd>来删除光标处(光标后侧)字符

---

### 文本编辑之插入

在正常模式下，按下<kbd>i</kbd>来在光标处插入文本

> 按下<kbd>i</kbd>是进入了插入模式，插入完成后要按下<kbd>ESC</kbd>返回正常模式

---

### 文本编辑之添加

在正常模式下，按下<kbd>A</kbd>来输入必要的添加内容（文本末）

> 按下<kbd>A</kbd>是进入了添加模式，添加完成后要按下<kbd>ESC</kbd>返回正常模式
> 默认为在文本末添加，因此光标位置不重要

---

### 编辑文件

- 打开文件：
``` bash
  vim 文件名 <回车>
```

- 保存退出：
``` bash
    :wq <回车>`
```

---

## 第一讲小结

1. 光标在文本中的移动既可以用箭头键，也可以用`h(左移) j(下行) k(上行) l(右移)`字母键

2. 进入Vim编辑器：`vim 文件名 <回车>`

3. 退出Vim编辑器：
    - 输入<kbd>ESC</kbd>，`:q! <回车>` 放弃所有改动
    - 输入<kbd>ESC</kbd>，`:wq! <回车>` 保存改动

4. 在正常模式下删除光标所在位置（光标后）的字符：<kbd>x</kbd>

5. 在正常模式下开始插入或添加文本：
    - `i 输入欲插入的文本 ` <kbd>ESC</kbd> 在光标前插入文本
    - `A 输入欲添加的文本 ` <kbd>ESC</kbd> 在一行后添加文本

---
---

# 第二讲

---

### 删除类命令

在正常模式下，输入`dw`可以从光标处删除至一个单词的末尾
> 输入`d`是开启删除模式，再次输入`w`是删除当前光标处(右侧)开始的单词

---

### 更多删除类命令

在正常模式下，输入`d$`从当前光标删除到行末
> 输入`d`是开启删除模式，再次输入`$`是删除当前光标处(右侧)所有内容

---

### 关于命令与对象

许多改变文本的命令都是由一个操作和一个动作构成
使用删除操作符`d`的命令格式为：

    d motion

其中：
- d - 删除操作符
- motion - 操作符的操作对象

常见的操作对象有：
- `w` - 从当前光标当前位置直到下一个单词起始处，不包括它的第一个字符
- `e` - 从当前光标当前位置直到单词末尾，包括最后一个字符
- `$` - 从当前光标当前位置直到当前行末

---

### 使用计数指定动作

在动作前输入数字会使其重复多次
- `2w`: 使光标向后移动两个单词
- `3e`：使光标向后移动到第三个单词末尾处（末尾最后一个字母前）
- `0`：移动光标至行首

---

### 使用计数以删除更多

在使用操作符时输入数字可以使其重复多次
删除更多：

    d 数字 motion

---

### 操作整行

在正常模式下，输入`dd`可以删除一整个当前行
> 输入`d`是开启删除模式，再次输入`d`是删除当前行所有内容

> 前面加上数字可以删除多行

---

### 撤销类命令

在正常模式下：
- 输入`u`来撤销最后执行的命令
- 输入`U`来撤销对整行的修改
- 输入<kbd>CTRL</kbd> + <kbd>R</kbd>可以重做被撤销的命令，即撤销撤销命令

---

## 第二讲小结

1. `dw`：从当前光标删除至下一个单词

2. `d$`：从当前光标删除至当前行末尾
   
3. `dd`：删除整行

4. 在前面加上**数字**可以重复做一个动作

5. 在正常模式下修改命令的格式为：
``` bash
    operator [number] motion
```
其中：
   - operator：操作符，表示要进行的操作，如`d`代表删除
   - [number]：可选项，表示动作重复次数
   - motion：动作，代表在所操作的文本上的移动，如`w`代表**word**，`$`代表**行末**

1. `0`：移动光标到行首

2. 撤销操作：
   - `u`：撤销上一次的操作
   - `U`：撤销整行的操作
   - <kbd>CTRL</kbd> + <kbd>R</kbd>：撤销上一次撤销

---
---

# 第三讲

---

### 置入类命令

在正常模式下，输入 `p`将最后一次删除的内容置入光标后

> 置入（插入）一整行：光标放在要放位置对应下一行的上一行处

---

### 替换类命令

在正常模式下，输入`r`和一个字符替换光标所在位置（光标右侧）的字符

---

### 更改类命令

在正常模式下，输入`ce`可以改变文本直到单词末尾，即从光标后删除到单词尾后进入**插入模式**

> 输入`ce`后进入了插入模式，要输入<kbd>ESC</kbd>切换到正常模式

--- 

### 使用c更改更多

与删除相同，更改类(删除后插入)操作格式为：

    c [number] motion

其中，动作参数也与删除相同，如`w`代表单词，`$`代表行末

---

## 第三讲小结

1. `p`：将已删除的文本内容置于光标后
> 如果最后一次删除的是一整行，则该行将置于当前光标所在行的下一行

2. `r` + **字符**：替换光标所在位置的字符

3.  更改类命令允许改变从当前光标所在位置直到动作指示的位置中间的文本，格式为：
``` bash
    c [number] motion
```

---
---

# 第四讲

---

### 定位及文件状态

在正常模式下，输入<kbd>CTRL</kbd> + <kbd>G</kbd>显示当前编辑文件中光标所在行位置以及文件状态信息

- 输入`G`可以使光标直接跳转到文件最后一行
- 输入`行号 + G`可以使光标返回到该行
- 输入`gg`可以使光标直接跳转到文件第一行

---

### 搜索类命令

在正常模式下，输入`/`加上一个**字符串**以及回车可以在当前文件中查找该字符串

- 输入`n`查找同上一次的字符串
- 输入`N`向相反方向查找同上一次的字符串
- 用`?`代替`/`逆向查找字符串
- <kbd>CTRL</kbd> + <kbd>O</kbd>回到之前的位置
- <kbd>CTRL</kbd> + <kbd>I</kbd>跳转到较新位置

> 如果已经查找到文件的末尾，查找会自动从文件头部继续查找

---

### 匹配括号的查找

在正常模式下，输入`%`可以查找光标处（光标后）括号匹配的括号，如`()`、`[]`、`{}`


---

### 替换命令

- `:s/old/new <回车>`：将光标所在行的第一个 old 替换成 new
- `:s/old/new/g`：将光标所在行所有 old 替换成 new
- `:行号,行号s/old/new/g`：将两行之间的所有 old 替换成 new
- `:%s/old/new/g`：将整个文件中的 old 替换成 new
- `:%s/old/new/gc`：将整个文件中的 old 替换成 new 并询问每个字符串是否替换

---

## 第四讲小结

1. 定位类命令
   - <kbd>CTRL</kbd> + <kbd>G</kbd>：显示当前光标所在位置和文件状态信息
   - `G`：将光标跳转到文件的最后一行
   - **行号** + `G`：将光标移动至该行号代表的行
   - `gg`：将光标跳转至文件第一行

2. 查找类命令
   - `/` + **字符串**：正向查找该字符串
   - `?` + **字符串**：反向查找字符串
   - 完成一次查找后 + `n`：重复上次命令，即同一方向继续查找
   - 完成一次查找后 + `N`：反方向继续查找】

3. 括号匹配类命令
   光标指向一侧括号 + `%`：将光标跳转到匹配的括号

4. 替换类命令
   - `:s/old/new`：在一行内，将头一个old替换成new
   - `:s/old/new/g`：在一行内，将所有old替换成new
   - `:#,#s/old/new/g`：在两行之内，将所有old替换成new
   - `:%s/old/new/g`：将文件里所有的old替换成new
   - `:%s/old/new/gc`：进行全文替换时询问是否每个替换

---
---

# 第五讲

---

### 在VIM内执行外部命令的方法

输入`:!` + 外部命令 可以执行该外部命令
- 外部命令是指系统的软件功能，需要时才会读入内存
- 常见的外部命令有：`ls`，`cp`，`mv`，`grep`等

> 所有的`:`命令都必须敲<回车>结束，之后不再强调

---

### 关于保存文件的更多信息

- 输入`:w FILENAME`将对文件的改动保存到文件中
- 输入`:!rm FILENAME`删除文件

> 在windows中，删除为`:!del FILENAME`

---

### 一个具有选择性的保存命令

输入`v motion :w FILENAME`保存文件的部分内容：

> 按`v`使得VIM进入可视模式进行选取，进而可以四处移动光标选取区域
> 在可视模式下，仍可以输入操作符对选中文本进行操作，如`d`为删除选中文本内容

---

### 提取和合并文件

- 输入`:r FILENAME`向当前文件中插入另外的文件内容
- 输入`:r !` + **外部命令**：读取外部命令的输出，并将输出放置在光标下

---

## 第五讲小结

1. `:!command`：用于执行一个外部命令command

2. `:w FILENAME`：将当前文件保存到名为FILENAME的文件中

3. `v motion :w FILENAME`：将当前文件在可视模式下选中的内容保存到FILENAME中
   
4. `:r FILENAME`：提取文件FILENAME并插入到光标后
   
5. `:r !command`：将外部命令command的结果插入到光标后

---
---

# 第六讲

---

### 打开类命令

- 输入`o`将在光标下方打开新的一行并进入**插入模式**
- 输入`O`将在光标下方打开新的一行并进入**插入模式**

---

### 附加类命令

- 输入`a`将可在光标之后插入文本
- 输入`A`将在行末插入文本

> `a`、`A`、`i`都会进入插入模式，只不过是插入的位置不同

---

### 另外一个置换类命令的版本

- 输入大写的`R`可以连续替换多个字符
- `r` + **字符**：替换光标所在位置的字符(前文提过)

---

### 复制粘贴文本

- 操作符`y`可以复制文本
- 输入`p`可以粘贴文本

> `y`本质上是一种操作符，例如`yw`可以用来复制一个单词

---

### 设置类命令选项

以设置查找或者替换可忽略大小写为例
- `:set ic`：忽略大小写
- `:set hls is`：匹配项高亮显示
- `:set noic`：禁用忽略大小写
- `:nohlsearch`：移除匹配项高亮显示
- `\c:/单词\c <回车>`：仅在一次查找时忽略字母大小写

---

## 第六讲小结

1. 换行插入
   - `o`：在光标下方一行打开新的一行，并进入插入模式
   - `O`：在光标上方一行打开新的一行，并进入插入模式

2. 插入文本
   - `a`：在光标所在位置后插入文本
   - `A`：在光标所在行末插入文本

3. `e`：使光标移动到单词末尾
   
4. `R`：进入替换模式
   
5. 复制与粘贴：
   - `y`：复制文本
   - `p`：粘贴文本

6. 输入`:set xxx`可以设置 xxx 选项，如：
   - `ic`（`ignorecase`）：查找时忽略字母大小写
   - `is`（`incsearch`）：查找短语时显示部分匹配
   - `hls`（`hlsearch`）：高亮显示所有的匹配短语
  
> 选项名可以用完整版本，也可以用缩略版本
> 在选项前加上 `no` 可以关闭选项

---
---

# 第七讲

---

### 获取帮助信息

- <kbd>F1</kbd> 或者 `:help <回车>`：开启帮助系统
- <kbd>CTRL</kbd> + <kbd>W</kbd>：在窗口之间跳转
- `:q <回车>`：关闭帮助系统
- `:help 主题`：获取关于该主题的帮助

---

### 创建启动脚本

创建一个 **vimrc** 文件来启用vim特性
- `:edit ~/.vimrc`(Linux) `:edit ~/_vimrc`(Windows)：开始编辑vimrc文件
- `:r $VIMRUNTIME/vimrc_example.vim`：读取vimrc示例文件的内容
- `:write`：保存文件
- 了解更多信息：`:help vimrc-intro`

---

### 补全功能

- 使用<kbd>CTRL</kbd> + <kbd>D</kbd> 和 `TAB` 可以进行命令行补全
- 对`:help`命令非常有用

---

## 第七讲小结

1. 输入`:help` 或者 `F1`可以打开帮助窗口
   
2. 输入`:help cmd`可以找到cmd命令的帮助
   
3. 输入<kbd>CTRL</kbd> + <kbd>W</kbd>可以在窗口内跳转
   
4. 输入`:q`关闭帮助窗口
   
5. 可以创建一个 **vimrc** 启动脚本来保存偏好的设置
   
6. 当输入`:`命令时，按<kbd>CTRL</kbd> + <kbd>D</kbd>查看可能的补全结果，按`TAB`使用一个补全